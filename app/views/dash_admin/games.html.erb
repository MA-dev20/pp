<section id="game-container" onclick="closeModal()">
<%= image_tag 'dash/game-arrow-top.png', id: 'arrow-top' %>
<%= image_tag 'dash/game-arrow-bottom.png', id: 'arrow-bottom', style: 'display: none'%>

<h1>Jetzt Spiel starten!</h1>

<%= form_for(:game, url: new_game_path(@admin)) do |f| %>
  
  <div class="col1">
      <%= f.label 'Team', class: 'row1' %>
      
      <div class="row2">
      <select id='game_team_id' name="game[team_id]" class="cs-select cs-skin-underline form-field" required>
          <option value=''>Team wählen</option>
          <% @teams.each do |t| %>
              <% if @team && t == @team %>
              <option value="<%= t.id %>" selected><%= t.name %></option>
              <% else %>
              <option value="<%= t.id %>"><%= t.name %></option>
              <% end %>
          <% end %>
      </select>
      </div>
      <div class="row3">
          -oder-
      </div>
  </div>
  
  <div class="col2">
  <%= f.label :password, 'Spiel-URL', class: 'row2' %>
  <div class="row3">
  <div class="form-field-text">
      peterpitch.com/
      <%= f.text_field :password, class: 'field2', id: 'url-field', required: true, onchange: 'set_arrow()' %>
  </div>
  </div>
  </div>
  
  <div class="col3">
     <div class="row3">
      <%= f.submit 'Spiel starten!', id: 'anim_but' %>
      </div>
  </div>
<% end %>

<%= form_for(:team, url: new_team_game_path(@admin)) do |f| %>

    <div class="col1">
        <div class="row4">
        <%= f.text_field :name, placeholder: 'Team erstellen', class: 'form-field', required: true %>
        </div>
        <%= f.submit '+' %>
    </div>
<% end %>

</section>
<% flash.each do |name, msg| %>
    <% if msg.is_a?(String) && name.to_s == 'wrong_password' %>
        <div class="modal-games" id="pop_up" tabindex="-1" role="dialog" aria-labelledby="demoModal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <button type="button" class="close modal-close" onclick="closeModal()" aria-label="Close">
                      <i class="fas fa-times"></i>
                    </button>
                    <div class="modal-body">
                    <h1><span>Ups, diese URL ist schon vergeben!</span><br><br><br>
                    - Sei kreativ und wähle eine andere aus. -</h1>
                    </div>
                </div>
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
    <% end %>
<% end %>

<script>

(function() {
    [].slice.call( document.querySelectorAll( 'form select.cs-select' ) ).forEach( 
        function(el) {
            new SelectFx(el, {
						onChange: function(val){
							$('#arrow-top').show();
                            $('#url-field').focus();
						}
					});

        });
})();
function set_arrow(){
    $('#arrow-bottom').show();
    $('#anim_but').addClass( "anim" );
}
$(document).ready(function(){
    if ($('#pop_up').length != 0){
        $('#pop_up').show();
        $('#game-container').addClass('backgroundblur');
    }
});
function closeModal() {
    $('#pop_up').hide();
    $('#game-container').removeClass('backgroundblur');
}

</script>